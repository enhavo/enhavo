services:
    Enhavo\Bundle\NewsletterBundle\Twig\SubscribeFormRenderer:
        arguments:
            - '@Enhavo\Bundle\NewsletterBundle\Subscribtion\SubscribtionManager'
            - '@twig'

        calls:
          - [ 'setContainer', ['@service_container']]
        tags:
            - { name: twig.extension }

    Enhavo\Bundle\NewsletterBundle\Menu\SubscriberMenu:
        parent: Enhavo\Bundle\AppBundle\Menu\Menu\BaseMenu
        tags:
            - { name: enhavo.menu, alias: newsletter_subscriber }

    Enhavo\Bundle\NewsletterBundle\Menu\GroupMenu:
        parent: Enhavo\Bundle\AppBundle\Menu\Menu\BaseMenu
        tags:
            - { name: enhavo.menu, alias: newsletter_group }

    Enhavo\Bundle\NewsletterBundle\Form\Type\SubscriberType:
        tags:
            - { name: form.type, alias: enhavo_newsletter_subscriber }

    enhavo_newsletter_subscribe:
        class: Enhavo\Bundle\NewsletterBundle\Form\Type\SubscribeType
        tags:
            - { name: form.type }

    Enhavo\Bundle\NewsletterBundle\Subscribtion\SubscribtionManager:
        public: true
        arguments:
            - '@event_dispatcher'
            - '@Enhavo\Component\Type\FactoryInterface[Storage]'
            - '@Enhavo\Component\Type\FactoryInterface[Strategy]'
            - '@form.factory'
            - '%enhavo_newsletter.subscribtion%'

    Enhavo\Bundle\NewsletterBundle\Factory\LocalSubscriberFactory:
        arguments:
            - '%enhavo_newsletter.model.local_subscriber.class%'
            - '@enhavo_newsletter.repository.group'

    Enhavo\Bundle\NewsletterBundle\Controller\SubscribtionController:
        arguments:
            - '@Enhavo\Bundle\NewsletterBundle\Subscribtion\SubscribtionManager'
            - '@Enhavo\Bundle\NewsletterBundle\Pending\PendingSubscriberManager'
            - '@translator'
        tags:
            - { name: controller.service_arguments }
