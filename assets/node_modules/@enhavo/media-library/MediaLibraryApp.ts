import axios, {CancelTokenSource}  from "axios";
import * as _ from "lodash";
import Data, {Item, ContentType, Tag} from "@enhavo/media-library/Data";
import UpdatedEvent from "@enhavo/app/view-stack/event/UpdatedEvent";
import * as async from "async";
import Message from "@enhavo/app/flash-message/Message";
import FlashMessenger from "@enhavo/app/flash-message/FlashMessenger";
import EventDispatcher from "@enhavo/app/view-stack/EventDispatcher";
import View from "@enhavo/app/view/View";
import ActionManager from "@enhavo/app/action/ActionManager";
import Router from "@enhavo/core/Router";
import ComponentRegistryInterface from "@enhavo/core/ComponentRegistryInterface";
import ViewInterface from "@enhavo/app/view-stack/ViewInterface";
import Translator from "@enhavo/core/Translator";
import MediaLibrary from "@enhavo/media-library/MediaLibrary";

export default class MediaLibraryApp
{
    private readonly flashMessenger: FlashMessenger;
    private readonly view: View;
    private readonly actionManager: ActionManager;
    private readonly mediaLibrary: MediaLibrary;

    public constructor(view: View, actionManager: ActionManager, flashMessenger: FlashMessenger, mediaLibrary: MediaLibrary)
    {
        this.view = view;
        this.flashMessenger = flashMessenger;
        this.actionManager = actionManager;
        this.mediaLibrary = mediaLibrary;
    }

    public init()
    {
        this.view.init();
        this.actionManager.init();
        this.flashMessenger.init();
        this.mediaLibrary.init();

        this.view.addDefaultCloseListener();
        this.view.ready();
    }
}
