<template>
    <div class="bundle-user-login" v-if="!userManager.loadingData">
        <div class="background" :style="backgroundImage()"></div>
        <div class="login-box">
            <div class="logo">
                <img :src="brandingLogo()" />
            </div>
            <slot></slot>
        </div>

        <div class="branding" v-if="userManager.branding.enable">
            <div class="text" v-html="getBrandingText()"></div>
            <div class="version" v-if="userManager.branding.enableVersion">
                {{ userManager.branding.version }}
            </div>
        </div>
    </div>
</template>

<script setup lang="ts">
import {inject} from "vue";
import '@enhavo/user/assets/styles/login.scss'
import {UserManager} from "@enhavo/user/manager/UserManager";

const userManager = inject('userManager') as UserManager
const defaultLogo = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iRWJlbmVfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI0MDkuMzMycHgiIGhlaWdodD0iMTE3LjMzM3B4IiB2aWV3Qm94PSIwIDAgNDA5LjMzMiAxMTcuMzMzIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA0MDkuMzMyIDExNy4zMzMiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnPjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0xNjguNDk0LDUyLjM4M1Y1Ny43YzAsMS45MjYtMS40NjcsMy45NDEtNC4wMzMsMy45NDFoLTIzLjY1MnY0Ljk1MWMwLDYuMTQzLDMuNDgzLDEwLjgxOCwxMC43MjYsMTAuODE4YzQuMDM0LDAsNy4xNTEtMC45MTgsMTAuMTc2LTIuMTA5YzEuMDA5LTAuMzY3LDEuNzQyLTAuNTUxLDIuMjAxLTAuNTUxYzEuNzQxLDAsMi45MzQsMS4yODUsMi45MzQsMi44NDRjMCwxLjE5MS0wLjU1MSwyLjEwNy0xLjc0MiwyLjY1OGMtNC4wMzQsMS44MzItOS42MjYsMi45MzQtMTMuNTY4LDIuOTM0Yy0xMC43MjYsMC0xNi45NTktNi45NjktMTYuOTU5LTE2Ljg2OVY1Mi4zODNjMC0xMC4yNjgsNi42LTE2Ljg2OCwxNi45NTktMTYuODY4QzE2Mi4wNzcsMzUuNTE1LDE2OC40OTQsNDIuMjA3LDE2OC40OTQsNTIuMzgzeiBNMTQwLjgwOCw1Mi4xMDd2My42NjdoMjEuNDUydi0zLjQ4M2MwLTYuODc2LTMuNjY3LTExLjAwMS0xMC43MjctMTEuMDAxQzE0NC40NzUsNDEuMjksMTQwLjgwOCw0NS41MDcsMTQwLjgwOCw1Mi4xMDd6Ii8+PHBhdGggZmlsbD0iI0ZGRkZGRiIgZD0iTTIxNC41MTEsNTEuOTI0djI4LjE0NWMwLDEuODM0LTEuMzc2LDMuMTE3LTMuMTE3LDMuMTE3Yy0xLjgzNCwwLTMuMTE3LTEuMjgzLTMuMTE3LTMuMTE3VjUxLjgzM2MwLTYuNjkyLTMuNzU2LTEwLjU0Mi0xMC43MjMtMTAuNTQyYy0zLjc1OSwwLTcuMTUsMC42NDItMTAuNzI3LDEuNjV2MzcuMTI5YzAsMS44MzQtMS4yODMsMy4xMTctMy4xMTYsMy4xMTdjLTEuNzQyLDAtMy4xMTctMS4yODMtMy4xMTctMy4xMTdWNDEuNjU3YzAtMS45MjUsMS4wMDktMy4yMDgsMy4xMTctMy44NTFjNC40OTEtMS4zNzUsOC44MDEtMi4yOTIsMTMuODQzLTIuMjkyQzIwOC44MjYsMzUuNTE1LDIxNC41MTEsNDEuNTY1LDIxNC41MTEsNTEuOTI0eiIvPjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0yMzQuMjE3LDIwLjIwNXYxOC43MDJjMy41NzYtMi4xMDgsNy45NzctMy4zOTIsMTEuNTUyLTMuMzkyYzEwLjI2OCwwLDE2LjA0Myw1Ljg2NywxNi4wNDMsMTYuNzc2djI3Ljc3OGMwLDEuODM0LTEuMzc1LDMuMTE3LTMuMTE3LDMuMTE3Yy0xLjgzMywwLTMuMTE3LTEuMjgzLTMuMTE3LTMuMTE3VjUxLjgzM2MwLTYuOTY3LTMuODUxLTEwLjU0Mi0xMC40NS0xMC41NDJjLTMuNzU5LDAtNy4zMzQsMS4yODMtMTAuOTEsMy45NDJ2MzQuODM3YzAsMS44MzQtMS4yODMsMy4xMTctMy4xMTYsMy4xMTdjLTEuNzQyLDAtMy4xMTctMS4yODMtMy4xMTctMy4xMTdWMjAuMjA1YzAtMS44MzMsMS4zNzUtMy4xMTcsMy4xMTctMy4xMTdDMjMyLjkzNCwxNy4wODgsMjM0LjIxNywxOC4zNzEsMjM0LjIxNywyMC4yMDV6Ii8+PHBhdGggZmlsbD0iI0ZGRkZGRiIgZD0iTTMwNi4xOCw0OS4xNzR2MjguMTQ1YzAsMS43NDItMC44MjUsMy4xMTctMi42NTksMy43NThjLTMuNjY3LDEuMzc1LTguNTI1LDIuMTA5LTEzLjIwMSwyLjEwOWMtMTAuODE3LDAtMTguMDYtNC4wMzUtMTguMDYtMTQuMDI3czguNDM0LTEzLjkzNCwxNy45NjktMTMuOTM0aDkuNzE3di02LjA1MWMwLTQuNjc1LTMuNDgzLTcuODg0LTkuNzE3LTcuODg0Yy0zLjMwMSwwLTYuMzI2LDAuNzMzLTkuMTY4LDIuMTA4Yy0xLjEsMC42NDItMi4wMTcsMS4wMDgtMy4xMTcsMS4wMDhjLTEuMzc1LDAtMi44NDItMS4xLTIuODQyLTIuODQyYzAtMS4xLDAuNDU5LTEuOTI1LDEuNDY3LTIuNTY3YzMuMjA5LTEuODMzLDcuODg0LTMuNDgzLDEzLjM4NS0zLjQ4M0MyOTguOTM4LDM1LjUxNSwzMDYuMTgsNDAuMDA2LDMwNi4xOCw0OS4xNzR6IE0yOTAuMDQ1LDYxYy02LjY5MiwwLTExLjU1MSwyLjI5MS0xMS41NTEsOC4yNWMwLDYuNTEsNC44NTgsOC4xNiwxMS44MjUsOC4xNmMzLjIwOSwwLDYuNDE4LTAuNDU5LDkuNjI2LTEuNDY3VjYxSDI5MC4wNDV6Ii8+PHBhdGggZmlsbD0iI0ZGRkZGRiIgZD0iTTM1MC4yNzQsMzguNTR2MC43MzNjMCwwLjI3NS0wLjA5MiwwLjQ1OC0wLjE4NCwwLjczM2wtMTMuNTY3LDQwLjMzOGMtMC43MzMsMi4xMDctMi4zODQsMi44NDItNC4xMjYsMi44NDJjLTEuNzQxLDAtMy4zOTItMC43MzQtNC4xMjUtMi44NDJsLTEzLjQ3Ny00MC4zMzhjLTAuMTgzLTAuNDU4LTAuMjc0LTAuOTE3LTAuMjc0LTEuNDY3YzAtMS41NTgsMC45MTctMy4wMjUsMy4wMjUtMy4wMjVjMS41NTgsMCwyLjU2NiwwLjczMywzLjAyNCwyLjI5MmwxMS44MjYsMzYuMzA0bDExLjgyNi0zNi4zMDRjMC40NTktMS41NTgsMS40NjctMi4yOTIsMy4wMjUtMi4yOTJDMzQ5LjM1NywzNS41MTUsMzUwLjI3NCwzNi45ODEsMzUwLjI3NCwzOC41NHoiLz48cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNMzkyLjksNTMuMjA4djEyLjM3N2MwLDExLTYuNjkyLDE3LjYwMi0xNy43ODUsMTcuNjAyYy0xMC45MDksMC0xNy43ODQtNi41MS0xNy43ODQtMTcuNjAyVjUzLjIwOGMwLTExLjA5Miw2Ljc4My0xNy42OTMsMTcuNzg0LTE3LjY5M0MzODYuMjA3LDM1LjUxNSwzOTIuOSw0Mi4xMTUsMzkyLjksNTMuMjA4eiBNMzYzLjU2NCw1Mi43NDl2MTMuMjkyYzAsNy4zMzQsNC42NzYsMTEuMzY5LDExLjU1MSwxMS4zNjljNi45NjgsMCwxMS41NTItNC4wMzUsMTEuNTUyLTExLjM2OVY1Mi43NDljMC03LjMzNC00LjU4NC0xMS40NTktMTEuNTUyLTExLjQ1OUMzNjguMjQsNDEuMjksMzYzLjU2NCw0NS40MTUsMzYzLjU2NCw1Mi43NDl6Ii8+PC9nPjxnPjxkZWZzPjxwYXRoIGlkPSJTVkdJRF8xXyIgZD0iTTIxLjI4NywzOS44MDRjMC0xLjg3MSwxLjMyNS00LjE2NywyLjk0Ni01LjEwMmwzMy43OTEtMTkuNTFjMS42MjEtMC45MzYsNC4yNzEtMC45MzYsNS44OTMsMGwzMy43OTMsMTkuNTFjMS42MjEsMC45MzYsMi45NDYsMy4yMzEsMi45NDYsNS4xMDJ2MzkuMDE5YzAsMS44NzEtMS4zMjUsNC4xNjgtMi45NDYsNS4xMDRsLTMzLjc5MywxOS41MWMtMS42MjEsMC45MzYtNC4yNzEsMC45MzYtNS44OTMsMGwtMzMuNzkxLTE5LjUxYy0xLjYyMS0wLjkzNi0yLjk0Ni0zLjIzMi0yLjk0Ni01LjEwNFYzOS44MDR6Ii8+PC9kZWZzPjxjbGlwUGF0aCBpZD0iU1ZHSURfMl8iPjx1c2UgeGxpbms6aHJlZj0iI1NWR0lEXzFfIiAgb3ZlcmZsb3c9InZpc2libGUiLz48L2NsaXBQYXRoPjxwYXRoIGNsaXAtcGF0aD0idXJsKCNTVkdJRF8yXykiIGZpbGw9IiM1MEIzRTgiIGQ9Ik02Mi4xNzUsNzcuNzY0Yy0wLjM5MSwwLjIyOS0wLjgyNywwLjM0NC0xLjI2NCwwLjM0NGMtMC40MywwLTAuODYxLTAuMTExLTEuMjQ2LTAuMzM0bC0xMy43NTQtNy45MTJjLTAuNzc1LTAuNDQ3LTEuMjUzLTEuMjczLTEuMjUzLTIuMTY4VjUxLjU2OWMwLTAuODcsMC40NTItMS42NzgsMS4xOTQtMi4xMzJsMTQuNjMzLTguOTU4YzEuMTc4LTAuNzIxLDIuNzE2LTAuMzUxLDMuNDM4LDAuODI3YzAuNzIxLDEuMTc3LDAuMzUsMi43MTYtMC44MjgsMy40MzhMNDkuNjU4LDUyLjk3djEzLjI3OGwxMS4yNDEsNi40NjlsMzkuNzU3LTIzLjI4N3YtOS42MjdjMC0xLjg3MS0xLjMyNS00LjE2Ny0yLjk0Ni01LjEwMmwtMzMuNzkzLTE5LjUxYy0xLjYyMS0wLjkzNi00LjI3MS0wLjkzNi01Ljg5MywwbC0zMy43OTEsMTkuNTFjLTEuNjIxLDAuOTM1LTIuOTQ2LDMuMjMxLTIuOTQ2LDUuMTAydjM5LjAxOWMwLDEuODcxLDEuMzI1LDQuMTY4LDIuOTQ2LDUuMTA0bDMzLjc5MSwxOS41MWMxLjYyMSwwLjkzNiw0LjI3MSwwLjkzNiw1Ljg5MywwbDMzLjc5My0xOS41MWMxLjYyMS0wLjkzNiwyLjk0Ni0zLjIzMiwyLjk0Ni01LjEwNFY1NS4yMjVMNjIuMTc1LDc3Ljc2NHoiLz48ZyBjbGlwLXBhdGg9InVybCgjU1ZHSURfMl8pIj48ZyBvcGFjaXR5PSIwLjkiPjxwYXRoIGZpbGw9IiMwMDc5QjQiIGQ9Ik02MC44NjEsNTkuNTExYzAtMC4wMDctMC4wMDUtMC4wMTQtMC4wMS0wLjAxN2wtMTEuMTg0LTYuNDU3Yy0wLjAwNS0wLjAwMy0wLjAxLTAuMDAxLTAuMDEsMC4wMDV2MTMuMTkzYzAsMC4wMDYsMC4wMDUsMC4wMTQsMC4wMSwwLjAxOGwxMS4xODQsNi40MzRjMC4wMDUsMC4wMDQsMC4wMSwwLjAwMiwwLjAxLTAuMDA2VjU5LjUxMXoiLz48L2c+PGcgb3BhY2l0eT0iMC45Ij48cGF0aCBmaWxsPSIjMDA3OUI0IiBkPSJNNTkuNjc2LDc3Ljc3OGMtMC4wMDYtMC4wMDItMC4wMTUtMC4wMDgtMC4wMjEtMC4wMWwtMTMuNzM0LTcuOWMtMC4wMDYtMC4wMDQtMC4wMTQtMC4wMS0wLjAxOC0wLjAxNGwtMS4yNDItMi4xNWMtMC4wMDItMC4wMDYtMC4wMDMtMC4wMTYtMC4wMDMtMC4wMjFWNTEuNTgxYzAtMC4wMDYsMC4wMDEtMC4wMTYsMC4wMDItMC4wMjJsMC4zMjItMS4yMTNjMC4wMDItMC4wMDUtMC4wMDEtMC4wMTMtMC4wMDYtMC4wMTZsLTIzLjY4LTEzLjY3Yy0wLjAwNS0wLjAwMy0wLjAxLTAuMDAxLTAuMDEsMC4wMDV2NDUuNjE0YzAsMC4wMDYsMC4wMDUsMC4wMTQsMC4wMSwwLjAxOGwzOS41NTUsMjIuODM2YzAuMDA1LDAuMDAyLDAuMDEsMCwwLjAxLTAuMDA2Vjc4LjExMmMwLTAuMDA2LTAuMDA1LTAuMDEyLTAuMDExLTAuMDE0TDU5LjY3Niw3Ny43Nzh6Ii8+PC9nPjwvZz48ZyBjbGlwLXBhdGg9InVybCgjU1ZHSURfMl8pIj48Zz48cGF0aCBmaWxsPSIjMjE5OUQ0IiBkPSJNNjIuMTg0LDc3Ljc1OGMtMC4wMDYsMC4wMDItMC4wMTUsMC4wMDgtMC4wMjEsMC4wMWMwLDAtMC44MTYsMC4zNC0xLjI1MywwLjM0Yy0wLjAxNywwLTAuMDM5LTAuMDA2LTAuMDM5LTAuMDA2Yy0wLjAwNiwwLTAuMDExLDAuMDA0LTAuMDExLDAuMDF2MjcuMDc4YzAsMC4wMDYsMC4wMDUsMC4wMDgsMC4wMSwwLjAwNmwzOS41NTQtMjIuODM2YzAuMDA2LTAuMDA0LDAuMDEtMC4wMTIsMC4wMS0wLjAxOFY1NS4zNjZjMC0wLjAwNi0wLjAwNC0wLjAwOS0wLjAxLTAuMDA1TDYyLjE4NCw3Ny43NTh6Ii8+PC9nPjxnPjxwYXRoIGZpbGw9IiMyMTk5RDQiIGQ9Ik02MC44NjEsNzIuNjgyYzAsMC4wMDgsMC4wMDQsMC4wMTYsMC4wMSwwLjAxOGwwLjAxOSwwLjAxMmMwLjAwNiwwLjAwMiwwLjAxNCwwLjAwMiwwLjAyLDBsMzkuNTE2LTIzLjE0NWMwLjAwNi0wLjAwMywwLjAxLTAuMDExLDAuMDEtMC4wMTd2LTEyLjgyYzAtMC4wMDYtMC4wMDQtMC4wMDktMC4wMS0wLjAwNUw2MC44NzEsNTkuNTU5Yy0wLjAwNSwwLjAwNC0wLjAxLDAuMDEyLTAuMDEsMC4wMThWNzIuNjgyeiIvPjwvZz48L2c+PC9nPjwvZz48L3N2Zz4=';

userManager.loadLoginData();

function backgroundImage()
{
    if (userManager.branding.backgroundImage) {
        return 'background-image (url:' + userManager.branding.backgroundImage + ')';
    }

    return '';
}

function brandingLogo()
{
    if (userManager.branding.logo) {
        return userManager.branding.logo;
    }
    return defaultLogo;
}

function getBrandingText()
{
    let text = userManager.branding.text;
    if (userManager.branding.enableCreatedBy) {
        text += ' Created and launched by <a href="https://www.weareindeed.com" target="_blank">weareindeed.com</a>'
    }
    return text;
}
</script>
